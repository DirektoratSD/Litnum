<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Judul Web Baru -->
    <title>Pendampingan Penguatan Literasi dan Numerasi Sekolah Dasar</title>
    
    <!-- Memuat Tailwind CSS dari CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="https://kemendikdasmen.go.id/web/image/website/21/favicon?unique=c3563e4">      
    
    <!-- Memuat font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Konfigurasi kustom Tailwind untuk font Inter -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    
    <!-- Sedikit CSS tambahan untuk body -->
    <style>
        body {
            /* Membuat font rendering lebih halus */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Style untuk scrollbar di tabel agar lebih menarik */
        .table-scrollbar::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .table-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        .table-scrollbar::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        .table-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans min-h-screen">

    <!-- Kontainer Utama -->
    <div class="container mx-auto max-w-6xl py-12 px-4 sm:px-6 lg:py-20 lg:px-8">

        <!-- Header / Judul Baru -->
        <header class="text-center mb-12 lg:mb-16">
            <h1 class="text-3xl font-bold tracking-tight text-slate-800 sm:text-4xl md:text-5xl">
                Pendampingan Penguatan <br class="block md:hidden">
                Literasi dan Numerasi Sekolah Dasar
            </h1>
            <p class="mt-4 text-lg text-slate-600 max-w-2xl mx-auto">
                Silakan pilih salah satu menu di bawah ini untuk melihat materi pendampingan atau data sekolah lokus.
            </p>
        </header>

        <!-- Grid untuk Card -->
        <!-- 
            Responsive Grid:
            - 1 kolom di layar kecil
            - 2 kolom di layar tablet
            - 3 kolom di layar besar
        -->
        <main class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">

            <!-- Card 1: Preview Slide Google (Membuka Modal) -->
            <a href="javascript:void(0)" id="openSlideModalBtn" class="group block rounded-xl bg-white shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-2">
                <div class="p-6">
                    <!-- Ikon -->
                    <div class="flex items-center justify-center w-12 h-12 rounded-full bg-yellow-100 text-yellow-600 mb-4 transition-all duration-300 group-hover:bg-yellow-600 group-hover:text-white">
                        <!-- Ikon (Presentation) -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125v-1.5c0-.621.504-1.125 1.125-1.125H5.25l1.125-1.125h12.75l1.125 1.125h2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h17.25m-17.25 0h17.25M9 9.563c0-1.036.84-1.875 1.875-1.875h2.25c1.035 0 1.875.84 1.875 1.875v5.25c0 1.035-.84 1.875-1.875 1.875h-2.25A1.875 1.875 0 0 1 9 14.812v-5.25ZM14.25 9a.75.75 0 0 0-1.5 0v5.25a.75.75 0 0 0 1.5 0v-5.25Z" />
                        </svg>
                    </div>
                    <!-- Konten Teks -->
                    <h3 class="text-xl font-semibold text-slate-800 mb-2 transition-colors duration-300 group-hover:text-yellow-600">
                        Materi Pendampingan
                    </h3>
                    <p class="text-slate-500 text-base">
                        Lihat slide presentasi materi penguatan literasi dan numerasi.
                    </p>
                </div>
            </a>

            <!-- Card 2: Data Sekolah (Membuka Modal) -->
            <a href="javascript:void(0)" id="openDataModalBtn" class="group block rounded-xl bg-white shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-2">
                <div class="p-6">
                    <!-- Ikon -->
                    <div class="flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 text-blue-600 mb-4 transition-all duration-300 group-hover:bg-blue-600 group-hover:text-white">
                        <!-- Ikon (Database/Building) -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z" />
                        </svg>
                    </div>
                    <!-- Konten Teks -->
                    <h3 class="text-xl font-semibold text-slate-800 mb-2 transition-colors duration-300 group-hover:text-blue-600">
                        Data Sekolah Lokus
                    </h3>
                    <p class="text-slate-500 text-base">
                        Jelajahi data sekolah yang menjadi lokus pendampingan di berbagai wilayah.
                    </p>
                </div>
            </a>
            
            <!-- Card 3: Modal Surat (Membuka Modal) -->
            <a href="javascript:void(0)" id="openSuratModalBtn" class="group block rounded-xl bg-white shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-2">
                <div class="p-6">
                    <!-- Ikon -->
                    <div class="flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 mb-4 transition-all duration-300 group-hover:bg-green-600 group-hover:text-white">
                        <!-- Ikon (Mail) -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
                        </svg>
                    </div>
                    <!-- Konten Teks -->
                    <h3 class="text-xl font-semibold text-slate-800 mb-2 transition-colors duration-300 group-hover:text-green-600">
                        Modal Surat
                    </h3>
                    <p class="text-slate-500 text-base">
                        Akses berbagai templat surat dan dokumen perjalanan dinas.
                    </p>
                </div>
            </a>

        </main>
    </div>

    <!-- Footer -->
    <footer class="text-center py-10 mt-12 border-t border-slate-200">
        <p class="text-slate-500">&copy; 2025 Pendampingan Literasi & Numerasi. Dibuat dengan Tailwind CSS.</p>
    </footer>

    <!-- ===== MODAL UNTUK PREVIEW SLIDE ===== -->
    <div id="slideModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm hidden">
        <!-- Kotak Modal -->
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-6xl mx-auto overflow-hidden">
            <!-- Header Modal -->
            <div class="flex items-center justify-between p-4 border-b">
                <h3 class="text-lg font-semibold">Preview Materi Pendampingan</h3>
                <button id="closeSlideModalBtn" class="text-slate-400 hover:text-slate-600">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <!-- Body Modal (Konten Slide) -->
            <div class="p-4 bg-slate-100">
                <!-- 
                  SRC IFRAME DI BAWAH INI TELAH DIPERBARUI SESUAI PERMINTAAN ANDA
                -->
                <div class="aspect-video w-full">
                    <iframe 
                        src="https://docs.google.com/presentation/d/e/2PACX-1vRHLrM1loLAxqOm57FU9q2W7CSSa8Ih-nKFAdaBqsrJ5kZ4g38q-BayMAB28oqzs26FIxdGgec_O1ad/pubembed?start=true&loop=true&delayms=5000" 
                        frameborder="0" 
                        width="100%" 
                        height="100%" 
                        allowfullscreen="true" 
                        mozallowfullscreen="true" 
                        webkitallowfullscreen="true">
                    </iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== MODAL UNTUK DATA SEKOLAH ===== -->
    <div id="dataModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm hidden">
        <!-- Kotak Modal -->
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-4xl mx-auto overflow-hidden flex flex-col" style="max-height: 90vh;">
            <!-- Header Modal -->
            <div class="flex items-center justify-between p-4 border-b shrink-0">
                <h3 class="text-lg font-semibold">Data Sekolah Lokus</h3>
                <button id="closeDataModalBtn" class="text-slate-400 hover:text-slate-600">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            
            <!-- Filter Dropdown -->
            <div class="p-4 border-b shrink-0">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- Dropdown Provinsi -->
                    <div>
                        <label for="provinsiFilter" class="block text-sm font-medium text-slate-700 mb-1">Provinsi</label>
                        <select id="provinsiFilter" class="w-full p-2 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <!-- Opsi akan diisi oleh JavaScript -->
                        </select>
                    </div>
                    <!-- Dropdown Nama Sekolah -->
                    <div>
                        <label for="sekolahFilter" class="block text-sm font-medium text-slate-700 mb-1">Nama Sekolah</label>
                        <select id="sekolahFilter" class="w-full p-2 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <!-- Opsi akan diisi oleh JavaScript -->
                        </select>
                    </div>
                </div>
            </div>

            <!-- Body Modal (Konten Tabel) -->
            <!-- Container Tabel dengan Scroll Vertikal dan Horizontal -->
            <div class="p-4 overflow-auto table-scrollbar">
                <div class="overflow-x-auto rounded-lg border">
                    <table id="sekolahTable" class="w-full min-w-[700px] text-left text-sm">
                        <thead class="bg-slate-100 text-slate-600 uppercase tracking-wider sticky top-0">
                            <tr>
                                <th class="p-4">NPSN</th>
                                <th class="p-4">Nama Sekolah</th>
                                <th class="p-4">Provinsi</th>
                                <th class="p-4">Kab/Kota</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody" class="divide-y">
                            <!-- Data akan diisi oleh JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== MODAL UNTUK SURAT ===== -->
    <div id="suratModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm hidden">
        <!-- Kotak Modal -->
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-4xl mx-auto overflow-hidden flex flex-col" style="max-height: 90vh;">
            <!-- Header Modal -->
            <div class="flex items-center justify-between p-4 border-b shrink-0">
                <h3 id="suratModalTitle" class="text-lg font-semibold">Pilih Jenis Surat</h3>
                <button id="closeSuratModalBtn" class="text-slate-400 hover:text-slate-600">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Body Modal: Wrapper untuk dua view -->
            <div class="flex-grow overflow-auto">
                
                <!-- View 1: Daftar Surat (Tombol) -->
                <div id="suratList" class="p-6">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- 
                          LINK PDF DI BAWAH INI TELAH DIPERBARUI.
                          data-pdf-src: Link untuk preview (embed).
                          data-download-src: Link untuk tombol download.
                        -->
                        <a href="javascript:void(0)" data-title="Surat Tugas" data-pdf-src="https://drive.google.com/file/d/1mP3d0u3ChumUJxIxjroW3awmUuN_jH8v/preview" data-download-src="https://drive.google.com/uc?export=download&id=1mP3d0u3ChumUJxIxjroW3awmUuN_jH8v" class="pdf-button block text-center w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold transition-colors duration-200 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Surat Tugas
                        </a>
                        <a href="javascript:void(0)" data-title="Surat Dinas" data-pdf-src="https://drive.google.com/file/d/1viU4z92VVkL5rwbbqHPlZns3t3G12Dgp/preview" data-download-src="https://drive.google.com/uc?export=download&id=1viU4z92VVkL5rwbbqHPlZns3t3G12Dgp" class="pdf-button block text-center w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold transition-colors duration-200 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Surat Dinas
                        </a>
                        <a href="javascript:void(0)" data-title="Surat UPT" data-pdf-src="https://drive.google.com/file/d/1sPxT2VzfF_Gfal1ixs-dhnXJimxOEdKj/preview" data-download-src="https://drive.google.com/uc?export=download&id=1sPxT2VzfF_Gfal1ixs-dhnXJimxOEdKj" class="pdf-button block text-center w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold transition-colors duration-200 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Surat UPT
                        </a>
                        <a href="javascript:void(0)" data-title="Perjadin" data-pdf-src="https://drive.google.com/file/d/1y5HD_CAjCoMqnEaBP7Bn5YKYgFZ9E8OT/preview" data-download-src="https://drive.google.com/uc?export=download&id=1y5HD_CAjCoMqnEaBP7Bn5YKYgFZ9E8OT" class="pdf-button block text-center w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold transition-colors duration-200 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Perjadin
                        </a>
                    </div>
                </div>

                <!-- View 2: Preview PDF (Tersembunyi by default) -->
                <div id="suratPreview" class="hidden h-full flex flex-col">
                    <!-- Konten Iframe -->
                    <div class="p-4 bg-slate-100 flex-grow overflow-auto">
                        <iframe id="suratIframe" src="about:blank" width="100%" height="100%" style="min-height: 60vh;" frameborder="0"></iframe>
                    </div>
                    <!-- Footer (Tombol Kembali & Download) -->
                    <div class="p-4 border-t shrink-0 bg-slate-50 flex justify-between items-center">
                        <button id="suratBackBtn" class="px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-semibold transition-colors duration-200 hover:bg-slate-300">
                            &larr; Kembali
                        </button>
                        <a id="suratDownloadBtn" href="#" download class="inline-block px-6 py-2 bg-green-600 text-white rounded-lg font-semibold transition-colors duration-200 hover:bg-green-700">
                            Download PDF
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>


    <!-- ===== JAVASCRIPT ===== -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- DATA SEKOLAH (Contoh Data) ---
            const dataSekolah = [
                { npsn: '20100011', sekolah: 'SDN CENDRAWASIH 1', provinsi: 'Jawa Barat', kota: 'Kota Bandung' },
                { npsn: '20100012', sekolah: 'SDN HARAPAN 3', provinsi: 'Jawa Barat', kota: 'Kota Bandung' },
                { npsn: '20200021', sekolah: 'SDN MERDEKA 5', provinsi: 'DKI Jakarta', kota: 'Jakarta Pusat' },
                { npsn: '20200022', sekolah: 'SDIT AL-IKHLAS', provinsi: 'DKI Jakarta', kota: 'Jakarta Selatan' },
                { npsn: '20300031', sekolah: 'SDN PERTIWI 2', provinsi: 'Jawa Tengah', kota: 'Kota Semarang' },
                { npsn: '20300032', sekolah: 'SDN MAJU JAYA', provinsi: 'Jawa Tengah', kota: 'Kab. Klaten' },
                { npsn: '20400041', sekolah: 'SDN GATOT SUBROTO 1', provinsi: 'Jawa Timur', kota: 'Kota Surabaya' },
                { npsn: '20400042', sekolah: 'SD MUHAMMADIYAH 4', provinsi: 'Jawa Timur', kota: 'Kota Malang' },
                { npsn: '20500051', sekolah: 'SDN 1 DENPASAR', provinsi: 'Bali', kota: 'Kota Denpasar' },
                { npsn: '20500052', sekolah: 'SDN 5 SANUR', provinsi: 'Bali', kota: 'Kota Denpasar' },
                { npsn: '20600061', sekolah: 'SDN 2 MATARAM', provinsi: 'Nusa Tenggara Barat', kota: 'Kota Mataram' },
                { npsn: '20700071', sekolah: 'SDN UNGGULAN 1', provinsi: 'Sulawesi Selatan', kota: 'Kota Makassar' },
                { npsn: '20700072', sekolah: 'SD INPRES SAMATA', provinsi: 'Sulawesi Selatan', kota: 'Kab. Gowa' },
            ];

            // --- Elemen Modal Slide ---
            const openSlideModalBtn = document.getElementById('openSlideModalBtn');
            const closeSlideModalBtn = document.getElementById('closeSlideModalBtn');
            const slideModal = document.getElementById('slideModal');

            // --- Elemen Modal Data ---
            const openDataModalBtn = document.getElementById('openDataModalBtn');
            const closeDataModalBtn = document.getElementById('closeDataModalBtn');
            const dataModal = document.getElementById('dataModal');

            // --- Elemen Modal Surat ---
            const openSuratModalBtn = document.getElementById('openSuratModalBtn');
            const closeSuratModalBtn = document.getElementById('closeSuratModalBtn');
            const suratModal = document.getElementById('suratModal');
            // Element di dalam Modal Surat
            const suratModalTitle = document.getElementById('suratModalTitle');
            const suratList = document.getElementById('suratList');
            const suratPreview = document.getElementById('suratPreview');
            const suratModalButtons = document.querySelectorAll('#suratList .pdf-button');
            const suratBackBtn = document.getElementById('suratBackBtn');
            const suratIframe = document.getElementById('suratIframe');
            const suratDownloadBtn = document.getElementById('suratDownloadBtn');

            // --- Elemen Filter dan Tabel ---
            const provinsiFilter = document.getElementById('provinsiFilter');
            const sekolahFilter = document.getElementById('sekolahFilter');
            const tableBody = document.getElementById('tableBody');

            // --- FUNGSI MODAL ---
            const openModal = (modal) => modal.classList.remove('hidden');
            const closeModal = (modal) => modal.classList.add('hidden');

            // Event Listener Modal Slide
            openSlideModalBtn.addEventListener('click', () => openModal(slideModal));
            closeSlideModalBtn.addEventListener('click', () => closeModal(slideModal));
            slideModal.addEventListener('click', (e) => {
                if (e.target === slideModal) closeModal(slideModal); // Tutup jika klik di luar kotak
            });

            // Event Listener Modal Data
            openDataModalBtn.addEventListener('click', () => {
                openModal(dataModal);
                // Selalu inisialisasi ulang filter saat modal dibuka, jika datanya dinamis
                initializeFilters();
            });
            closeDataModalBtn.addEventListener('click', () => closeModal(dataModal));
            dataModal.addEventListener('click', (e) => {
                if (e.target === dataModal) closeModal(dataModal); // Tutup jika klik di luar kotak
            });

            // --- FUNGSI UNTUK MODAL SURAT ---

            // Fungsi untuk menampilkan daftar surat (view 1)
            function showSuratList() {
                suratPreview.classList.add('hidden');
                suratList.classList.remove('hidden');
                suratModalTitle.textContent = 'Pilih Jenis Surat';
                suratIframe.src = 'about:blank'; // Kosongkan iframe
            }

            // Event Listener Modal Surat (Tombol Buka)
            openSuratModalBtn.addEventListener('click', () => openModal(suratModal));

            // Event Listener Modal Surat (Tombol Tutup Utama)
            closeSuratModalBtn.addEventListener('click', () => {
                closeModal(suratModal);
                setTimeout(showSuratList, 300); // Reset view setelah modal tertutup
            });

            // Event Listener Modal Surat (Klik Latar Belakang)
            suratModal.addEventListener('click', (e) => {
                if (e.target === suratModal) {
                    closeModal(suratModal);
                    setTimeout(showSuratList, 300); // Reset view setelah modal tertutup
                }
            });

            // Event Listener untuk 4 Tombol Surat -> Buka PDF Preview
            suratModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const title = button.getAttribute('data-title');
                    const pdfSrc = button.getAttribute('data-pdf-src');
                    const downloadSrc = button.getAttribute('data-download-src');

                    // Set content modal preview
                    suratModalTitle.textContent = `Preview: ${title}`;
                    suratIframe.src = pdfSrc;
                    suratDownloadBtn.href = downloadSrc;

                    // Ganti view
                    suratList.classList.add('hidden');
                    suratPreview.classList.remove('hidden');
                });
            });

            // Event Listener untuk Tombol "Kembali" di preview
            suratBackBtn.addEventListener('click', showSuratList);


            // --- FUNGSI TABEL DAN FILTER ---

            // Fungsi untuk mengisi tabel dengan data
            function populateTable(data) {
                tableBody.innerHTML = ''; // Kosongkan tabel
                
                if (data.length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="4" class="text-center p-6 text-slate-500">
                                Data tidak ditemukan.
                            </td>
                        </tr>
                    `;
                    return;
                }

                data.forEach(item => {
                    const row = `
                        <tr class="hover:bg-slate-50">
                            <td class="p-4">${item.npsn}</td>
                            <td class="p-4 font-medium text-slate-800">${item.sekolah}</td>
                            <td class="p-4">${item.provinsi}</td>
                            <td class="p-4">${item.kota}</td>
                        </tr>
                    `;
                    tableBody.innerHTML += row;
                });
            }


            let currentProvinsi = 'semua';
            let currentSekolah = 'semua';

            // 1. Isi Dropdown Provinsi
            function populateProvinsiFilter() {
                // Ambil provinsi unik dan urutkan
                const provinsi = ['semua', ...new Set(dataSekolah.map(item => item.provinsi).sort())];
                provinsiFilter.innerHTML = '';
                
                provinsi.forEach(p => {
                    const option = document.createElement('option');
                    option.value = p;
                    option.textContent = (p === 'semua') ? 'Semua Provinsi' : p;
                    provinsiFilter.appendChild(option);
                });
                provinsiFilter.value = currentProvinsi; // Pertahankan state filter
            }

            // 2. Isi Dropdown Sekolah (berdasarkan provinsi)
            function populateSekolahFilter(provinsi) {
                sekolahFilter.innerHTML = '';
                let sekolahList = [];

                if (provinsi === 'semua') {
                    sekolahList = dataSekolah;
                } else {
                    sekolahList = dataSekolah.filter(item => item.provinsi === provinsi);
                }

                // Ambil nama sekolah unik dan urutkan
                const sekolah = ['semua', ...new Set(sekolahList.map(item => item.sekolah).sort())];
                
                sekolah.forEach(s => {
                    const option = document.createElement('option');
                    option.value = s;
                    option.textContent = (s === 'semua') ? 'Semua Sekolah' : s;
                    sekolahFilter.appendChild(option);
                });
                sekolahFilter.value = currentSekolah; // Pertahankan state filter
            }

            // 3. Terapkan Filter ke Tabel
            function applyFilters() {
                let filteredData = dataSekolah;

                // Filter berdasarkan Provinsi
                if (currentProvinsi !== 'semua') {
                    filteredData = filteredData.filter(item => item.provinsi === currentProvinsi);
                }

                // Filter berdasarkan Sekolah
                if (currentSekolah !== 'semua') {
                    filteredData = filteredData.filter(item => item.sekolah === currentSekolah);
                }

                populateTable(filteredData);
            }

            // --- Event Listener untuk Filter ---

            // Saat Provinsi berubah
            provinsiFilter.addEventListener('change', (e) => {
                currentProvinsi = e.g.value;
                currentSekolah = 'semua'; // Reset pilihan sekolah
                populateSekolahFilter(currentProvinsi); // Update dropdown sekolah
                applyFilters(); // Update tabel
            });

            // Saat Sekolah berubah
            sekolahFilter.addEventListener('change', (e) => {
                currentSekolah = e.target.value;
                applyFilters(); // Update tabel
            });


            // --- Inisialisasi Saat Awal ---
            function initializeFilters() {
                // Set state awal
                currentProvinsi = 'semua';
                currentSekolah = 'semua';
                // Isi dropdown
                populateProvinsiFilter();
                populateSekolahFilter('semua');
                // Tampilkan semua data
                populateTable(dataSekolah);
            }
            
            // Panggil inisialisasi saat script dimuat
            initializeFilters();

        });
    </script>

</body>
</html>

